{% extends "base.html" %}
{% block content %}
<h2 class="text-2xl font-bold mb-4 text-green-700">游늳 Evaluaciones M칠dicas Preventivas</h2>

<!-- Formulario de registro -->
<form action="/registrar_evaluacion" method="POST" class="mb-6 bg-white p-6 rounded shadow-lg">
  
  <!-- 游뽘 Selector de paciente -->
  <label class="block mb-2 font-semibold text-gray-700">Nombre del paciente:</label>
  <select name="nombre" class="border px-2 py-2 w-full mb-3 rounded focus:ring-2 focus:ring-green-400" required>
    <option value="">Seleccione un paciente</option>
    {% for p in pacientes %}
    <option value="{{ p }}">{{ p }}</option>
    {% endfor %}
  </select>

  <label class="block mb-2 font-semibold text-gray-700">A침o:</label>  
  <input type="text" name="a침o" class="border px-2 py-2 w-full mb-3 rounded focus:ring-2 focus:ring-green-400" required>

  <label class="block mb-2 font-semibold text-gray-700">Presi칩n Arterial:</label>
  <input type="text" name="presion" class="border px-2 py-2 w-full mb-3 rounded focus:ring-2 focus:ring-green-400">

  <label class="block mb-2 font-semibold text-gray-700">Colesterol:</label>
  <input type="text" name="colesterol" class="border px-2 py-2 w-full mb-3 rounded focus:ring-2 focus:ring-green-400">

  <label class="block mb-2 font-semibold text-gray-700">Observaciones:</label>
  <textarea name="observaciones" class="border px-2 py-2 w-full mb-3 rounded focus:ring-2 focus:ring-green-400"></textarea>

  <button type="submit" class="w-full bg-green-600 text-white py-2 px-4 rounded font-bold hover:bg-green-700 transition">
    Registrar Evaluaci칩n
  </button>
</form>

<!-- Tabla de evaluaciones -->
{% if evaluaciones %}
  <h3 class="text-xl font-semibold mb-3 text-gray-800">游늶 Historial de Evaluaciones</h3>
  <table class="table-auto border-collapse border border-gray-300 w-full shadow-md bg-white rounded-lg">
    <thead class="bg-green-600 text-white">
      <tr>
        <th class="border px-4 py-2">Paciente</th>
        <th class="border px-4 py-2">A침o</th>
        <th class="border px-4 py-2">Presi칩n Arterial</th>
        <th class="border px-4 py-2">Colesterol</th>
        <th class="border px-4 py-2">Observaciones</th>
      </tr>
    </thead>
    <tbody>
      {% for e in evaluaciones %}
      <tr class="hover:bg-green-50">
        <td class="border px-4 py-2">{{ e.nombre }}</td>
        <td class="border px-4 py-2">{{ e.a침o }}</td>
        <td class="border px-4 py-2">{{ e.presion }}</td>
        <td class="border px-4 py-2">{{ e.colesterol }}</td>
        <td class="border px-4 py-2">{{ e.observaciones }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
{% else %}
  <p class="text-gray-600 mt-4">丘멆잺 No hay evaluaciones registradas a칰n.</p>
{% endif %}
{% endblock %}
